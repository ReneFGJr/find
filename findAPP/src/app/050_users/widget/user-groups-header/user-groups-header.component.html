<!-- src/app/pages/user-list/user-list.component.html -->
<div class="container mt-4">
  <div class="row">
    <div class="col-12 col-md-8">
      <h4>
        Grupo {{ group?.gr_name }} <sup>({{ group?.id_gr }})</sup>
      </h4>
      <!-- 1) Indicador de carregamento -->
      <div *ngIf="isLoading" class="alert alert-info">Carregando usuários…</div>

      <!-- 3) Campo de busca (só aparece quando não está carregando nem há erro) -->
      <div class="mb-3" *ngIf="!isLoading">
        <input
          #searchInput
          (keyup)="ngAfterViewInit()"
          type="text"
          class="form-control"
          placeholder="Buscar por nome ou email..."
        />
      </div>

      <div>{{errorMsg}}</div>

      <!-- 4) Tabela de usuários (só aparece quando não está carregando nem há erro) -->
      <table *ngIf="!isLoading" class="table table-striped table-hover">
        <thead class="thead-light">
          <tr>
            <th>Nome</th>
            <th style="width: 10px">Ações</th>
          </tr>
        </thead>
        <tr *ngFor="let user of users">
        <td>{{user.us_nome}}</td>
        <td style="text-align: right">
          <i class="bi bi-plus-circle full me-1 link" (click)="addUserToGroup(user.id_us)"></i>
        </td>
        </tr>
      </table>
    </div>
    <div class="col-12 col-md-4">
      <app-user-groups-assign-users [assignedUsers]="assignedUsers"></app-user-groups-assign-users>
  </div>
</div>
