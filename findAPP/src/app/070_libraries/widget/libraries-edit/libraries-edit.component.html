<!-- src/app/library/library-form.component.html -->
<div class="container my-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="m-0">
      {{ isEdit() ? 'Editar Biblioteca' : 'Nova Biblioteca' }}
    </h2>
  </div>

  <div *ngIf="loading()" class="alert alert-info">Carregando...</div>
  <div *ngIf="serverError()" class="alert alert-danger">{{ serverError() }}</div>
  <div *ngIf="successMessage()" class="alert alert-success">{{ successMessage() }}</div>

  <form [formGroup]="form" (ngSubmit)="submit()" class="needs-validation" novalidate>
    <div class="row g-3">
      <div class="col-md-8">
        <label class="form-label">Nome da Biblioteca *</label>
        <input type="text" class="form-control" formControlName="l_name" placeholder="Ex.: Biblioteca CEDAP" />
        <div class="invalid-feedback d-block" *ngIf="f.l_name.touched && f.l_name.invalid">
          Informe um nome (mín. 3 caracteres).
        </div>
      </div>

      <div class="col-md-4">
        <label class="form-label">Código (até 15) *</label>
        <input type="text" class="form-control" formControlName="l_code" placeholder="Ex.: 1001" readonly />
        <div class="invalid-feedback d-block" *ngIf="f.l_code.touched && f.l_code.invalid">
          Código é obrigatório (máx. 15).
        </div>
      </div>

      <div class="col-md-4">
        <label class="form-label">ID Numérico (l_id) *</label>
        <input type="number" class="form-control" formControlName="l_id" placeholder="Ex.: 1001" readonly />
        <div class="invalid-feedback d-block" *ngIf="f.l_id.touched && f.l_id.invalid">
          Informe um número inteiro ≥ 1.
        </div>
      </div>

      <div class="col-md-8">
      </div>

      <div class="col-12">
        <label class="form-label">Sobre (l_about)</label>
        <textarea rows="4" class="form-control" formControlName="l_about"
          placeholder="Descrição curta da biblioteca..."></textarea>
      </div>

      <div class="col-md-3">
        <label class="form-label">Visível</label>
        <select class="form-select" formControlName="l_visible">
          <option [value]="1">Sim</option>
          <option [value]="0">Não</option>
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label">Rede (l_net)</label>
        <select class="form-select" formControlName="l_net">
          <option [value]="1">Sim</option>
          <option [value]="0">Não</option>
        </select>
      </div>
    </div>

    <hr class="my-4" />

    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary" [disabled]="saving()">
        {{ isEdit() ? 'Salvar alterações' : 'Cadastrar' }}
      </button>
      <a class="btn btn-outline-secondary" [routerLink]="['/libraries']">Cancelar</a>
    </div>
  </form>
</div>
